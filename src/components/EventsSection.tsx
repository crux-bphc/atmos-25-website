import { useRef } from "react"
import useMediaQuery from "@/hooks/useMediaQuery";
import {motion, cubicBezier} from "motion/react"
import EventLink from "./EventLink";
import Glass from "./Glass";

export default function EventsSection(){
	const sectionRef = useRef(null);
	const easing = cubicBezier(.8,0,0.2,1)
	
	const isMobile = useMediaQuery('(width <= 768px)');
	console.log(isMobile);
	const inViewAnimation = isMobile ? {
		height: ["100%", null, "33%"]
	} : {
		width: [null, null, "33%"]
	}	

	return (
		<section ref={sectionRef} id="events" className="h-svh w-screen relative flex flex-row bg-radial/oklab from-[#FB71BC] to-[#FE45A9] overflow-hidden snap-start md:snap-center">
			<motion.div
			initial = {{width: "100%"}}
			whileInView={inViewAnimation}
			transition={{ duration: 1.8, ease: "easeInOut", times : [0, 1/1.8, 1] }}
			viewport={{ amount: 0.9, once: true}}
			className="svg-container absolute top-0 left-0 w-screen h-svh z-5 bg-black flex flex-col">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 960 180" fill="none" preserveAspectRatio="none" className="w-full h-16 hidden md:block">
				<path d="M137.463 35.1897H38.2759V71.4212H129.324V101.055H38.2759V144.926H142.04V175.601H0V4.97749H137.463V35.1897Z" fill="#FB71BC"/>
				<path d="M271.883 4.97749H312.575L248.613 175.601H211.608L148.282 4.97749H190.118L230.81 134.508L271.883 4.97749Z" fill="#FB71BC"/>
				<path d="M464.036 35.1897H364.849V71.4212H455.898V101.055H364.849V144.926H468.614V175.601H326.573V4.97749H464.036V35.1897Z" fill="#FB71BC"/>
				<path d="M488.08 4.97749H529.153L603.798 124.09V4.97749H640.293V175.601H601.127L524.575 54.4051V175.601H488.08V4.97749Z" fill="#FB71BC"/>
				<path d="M802.69 4.97749V35.1897H746.611V175.601H707.191V35.1897H650.858V4.97749H802.69Z" fill="#FB71BC"/>
				<path d="M843.646 122.932C844.833 130.727 847.164 136.553 850.64 140.412C856.998 147.434 867.892 150.945 883.321 150.945C892.561 150.945 900.064 150.019 905.829 148.167C916.765 144.617 922.233 138.019 922.233 128.373C922.233 122.74 919.52 118.379 914.094 115.293C908.669 112.283 900.149 109.621 888.535 107.305L868.697 103.254C849.199 99.2412 835.72 94.881 828.26 90.1736C815.628 82.3022 809.313 69.9936 809.313 53.2476C809.313 37.9678 815.416 25.2733 827.624 15.164C839.831 5.05466 857.761 0 881.414 0C901.166 0 917.994 4.78457 931.897 14.3537C945.885 23.8457 953.218 37.6592 953.896 55.7942H916.256C915.578 45.5305 910.661 38.2379 901.505 33.9164C895.401 31.0611 887.814 29.6334 878.743 29.6334C868.655 29.6334 860.601 31.4855 854.582 35.1897C848.563 38.8939 845.554 44.0643 845.554 50.701C845.554 56.7974 848.521 61.3505 854.455 64.3601C858.27 66.3666 866.408 68.7203 878.87 71.4212L911.17 78.4823C925.327 81.5691 936.009 85.6978 943.214 90.8682C954.405 98.8939 960 110.508 960 125.711C960 141.299 953.43 154.264 940.29 164.605C927.234 174.868 908.754 180 884.847 180C860.432 180 841.23 174.945 827.242 164.836C813.254 154.65 806.261 140.682 806.261 122.932H843.646Z" fill="#FB71BC"/>
				</svg>
				<motion.svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 960 180" fill="none" preserveAspectRatio="none" className="w-full h-full basis-1" animate={{flexGrow: [3, 1, 3]}} transition={{ease: easing, duration: 3, repeat: Infinity}}>
				<path d="M137.463 35.1897H38.2759V71.4212H129.324V101.055H38.2759V144.926H142.04V175.601H0V4.97749H137.463V35.1897Z" fill="#FB71BC"/>
				<path d="M271.883 4.97749H312.575L248.613 175.601H211.608L148.282 4.97749H190.118L230.81 134.508L271.883 4.97749Z" fill="#FB71BC"/>
				<path d="M464.036 35.1897H364.849V71.4212H455.898V101.055H364.849V144.926H468.614V175.601H326.573V4.97749H464.036V35.1897Z" fill="#FB71BC"/>
				<path d="M488.08 4.97749H529.153L603.798 124.09V4.97749H640.293V175.601H601.127L524.575 54.4051V175.601H488.08V4.97749Z" fill="#FB71BC"/>
				<path d="M802.69 4.97749V35.1897H746.611V175.601H707.191V35.1897H650.858V4.97749H802.69Z" fill="#FB71BC"/>
				<path d="M843.646 122.932C844.833 130.727 847.164 136.553 850.64 140.412C856.998 147.434 867.892 150.945 883.321 150.945C892.561 150.945 900.064 150.019 905.829 148.167C916.765 144.617 922.233 138.019 922.233 128.373C922.233 122.74 919.52 118.379 914.094 115.293C908.669 112.283 900.149 109.621 888.535 107.305L868.697 103.254C849.199 99.2412 835.72 94.881 828.26 90.1736C815.628 82.3022 809.313 69.9936 809.313 53.2476C809.313 37.9678 815.416 25.2733 827.624 15.164C839.831 5.05466 857.761 0 881.414 0C901.166 0 917.994 4.78457 931.897 14.3537C945.885 23.8457 953.218 37.6592 953.896 55.7942H916.256C915.578 45.5305 910.661 38.2379 901.505 33.9164C895.401 31.0611 887.814 29.6334 878.743 29.6334C868.655 29.6334 860.601 31.4855 854.582 35.1897C848.563 38.8939 845.554 44.0643 845.554 50.701C845.554 56.7974 848.521 61.3505 854.455 64.3601C858.27 66.3666 866.408 68.7203 878.87 71.4212L911.17 78.4823C925.327 81.5691 936.009 85.6978 943.214 90.8682C954.405 98.8939 960 110.508 960 125.711C960 141.299 953.43 154.264 940.29 164.605C927.234 174.868 908.754 180 884.847 180C860.432 180 841.23 174.945 827.242 164.836C813.254 154.65 806.261 140.682 806.261 122.932H843.646Z" fill="#FB71BC"/>
				</motion.svg>
				<motion.svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 960 180" fill="none" preserveAspectRatio="none" className="w-full h-full basis-1 grow-1">
				<path d="M137.463 35.1897H38.2759V71.4212H129.324V101.055H38.2759V144.926H142.04V175.601H0V4.97749H137.463V35.1897Z" fill="#FB71BC"/>
				<path d="M271.883 4.97749H312.575L248.613 175.601H211.608L148.282 4.97749H190.118L230.81 134.508L271.883 4.97749Z" fill="#FB71BC"/>
				<path d="M464.036 35.1897H364.849V71.4212H455.898V101.055H364.849V144.926H468.614V175.601H326.573V4.97749H464.036V35.1897Z" fill="#FB71BC"/>
				<path d="M488.08 4.97749H529.153L603.798 124.09V4.97749H640.293V175.601H601.127L524.575 54.4051V175.601H488.08V4.97749Z" fill="#FB71BC"/>
				<path d="M802.69 4.97749V35.1897H746.611V175.601H707.191V35.1897H650.858V4.97749H802.69Z" fill="#FB71BC"/>
				<path d="M843.646 122.932C844.833 130.727 847.164 136.553 850.64 140.412C856.998 147.434 867.892 150.945 883.321 150.945C892.561 150.945 900.064 150.019 905.829 148.167C916.765 144.617 922.233 138.019 922.233 128.373C922.233 122.74 919.52 118.379 914.094 115.293C908.669 112.283 900.149 109.621 888.535 107.305L868.697 103.254C849.199 99.2412 835.72 94.881 828.26 90.1736C815.628 82.3022 809.313 69.9936 809.313 53.2476C809.313 37.9678 815.416 25.2733 827.624 15.164C839.831 5.05466 857.761 0 881.414 0C901.166 0 917.994 4.78457 931.897 14.3537C945.885 23.8457 953.218 37.6592 953.896 55.7942H916.256C915.578 45.5305 910.661 38.2379 901.505 33.9164C895.401 31.0611 887.814 29.6334 878.743 29.6334C868.655 29.6334 860.601 31.4855 854.582 35.1897C848.563 38.8939 845.554 44.0643 845.554 50.701C845.554 56.7974 848.521 61.3505 854.455 64.3601C858.27 66.3666 866.408 68.7203 878.87 71.4212L911.17 78.4823C925.327 81.5691 936.009 85.6978 943.214 90.8682C954.405 98.8939 960 110.508 960 125.711C960 141.299 953.43 154.264 940.29 164.605C927.234 174.868 908.754 180 884.847 180C860.432 180 841.23 174.945 827.242 164.836C813.254 154.65 806.261 140.682 806.261 122.932H843.646Z" fill="#FB71BC"/>
				</motion.svg>
				<motion.svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 960 180" fill="none" preserveAspectRatio="none" className="w-full h-full basis-1" animate={{flexGrow: [1, 3, 1]}} transition={{ease: easing, duration: 3, repeat: Infinity}}>
				<path d="M137.463 35.1897H38.2759V71.4212H129.324V101.055H38.2759V144.926H142.04V175.601H0V4.97749H137.463V35.1897Z" fill="#FB71BC"/>
				<path d="M271.883 4.97749H312.575L248.613 175.601H211.608L148.282 4.97749H190.118L230.81 134.508L271.883 4.97749Z" fill="#FB71BC"/>
				<path d="M464.036 35.1897H364.849V71.4212H455.898V101.055H364.849V144.926H468.614V175.601H326.573V4.97749H464.036V35.1897Z" fill="#FB71BC"/>
				<path d="M488.08 4.97749H529.153L603.798 124.09V4.97749H640.293V175.601H601.127L524.575 54.4051V175.601H488.08V4.97749Z" fill="#FB71BC"/>
				<path d="M802.69 4.97749V35.1897H746.611V175.601H707.191V35.1897H650.858V4.97749H802.69Z" fill="#FB71BC"/>
				<path d="M843.646 122.932C844.833 130.727 847.164 136.553 850.64 140.412C856.998 147.434 867.892 150.945 883.321 150.945C892.561 150.945 900.064 150.019 905.829 148.167C916.765 144.617 922.233 138.019 922.233 128.373C922.233 122.74 919.52 118.379 914.094 115.293C908.669 112.283 900.149 109.621 888.535 107.305L868.697 103.254C849.199 99.2412 835.72 94.881 828.26 90.1736C815.628 82.3022 809.313 69.9936 809.313 53.2476C809.313 37.9678 815.416 25.2733 827.624 15.164C839.831 5.05466 857.761 0 881.414 0C901.166 0 917.994 4.78457 931.897 14.3537C945.885 23.8457 953.218 37.6592 953.896 55.7942H916.256C915.578 45.5305 910.661 38.2379 901.505 33.9164C895.401 31.0611 887.814 29.6334 878.743 29.6334C868.655 29.6334 860.601 31.4855 854.582 35.1897C848.563 38.8939 845.554 44.0643 845.554 50.701C845.554 56.7974 848.521 61.3505 854.455 64.3601C858.27 66.3666 866.408 68.7203 878.87 71.4212L911.17 78.4823C925.327 81.5691 936.009 85.6978 943.214 90.8682C954.405 98.8939 960 110.508 960 125.711C960 141.299 953.43 154.264 940.29 164.605C927.234 174.868 908.754 180 884.847 180C860.432 180 841.23 174.945 827.242 164.836C813.254 154.65 806.261 140.682 806.261 122.932H843.646Z" fill="#FB71BC"/>
				</motion.svg>
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 960 180" fill="none" preserveAspectRatio="none" className="w-full h-16 hidden md:block">
				<path d="M137.463 35.1897H38.2759V71.4212H129.324V101.055H38.2759V144.926H142.04V175.601H0V4.97749H137.463V35.1897Z" fill="#FB71BC"/>
				<path d="M271.883 4.97749H312.575L248.613 175.601H211.608L148.282 4.97749H190.118L230.81 134.508L271.883 4.97749Z" fill="#FB71BC"/>
				<path d="M464.036 35.1897H364.849V71.4212H455.898V101.055H364.849V144.926H468.614V175.601H326.573V4.97749H464.036V35.1897Z" fill="#FB71BC"/>
				<path d="M488.08 4.97749H529.153L603.798 124.09V4.97749H640.293V175.601H601.127L524.575 54.4051V175.601H488.08V4.97749Z" fill="#FB71BC"/>
				<path d="M802.69 4.97749V35.1897H746.611V175.601H707.191V35.1897H650.858V4.97749H802.69Z" fill="#FB71BC"/>
				<path d="M843.646 122.932C844.833 130.727 847.164 136.553 850.64 140.412C856.998 147.434 867.892 150.945 883.321 150.945C892.561 150.945 900.064 150.019 905.829 148.167C916.765 144.617 922.233 138.019 922.233 128.373C922.233 122.74 919.52 118.379 914.094 115.293C908.669 112.283 900.149 109.621 888.535 107.305L868.697 103.254C849.199 99.2412 835.72 94.881 828.26 90.1736C815.628 82.3022 809.313 69.9936 809.313 53.2476C809.313 37.9678 815.416 25.2733 827.624 15.164C839.831 5.05466 857.761 0 881.414 0C901.166 0 917.994 4.78457 931.897 14.3537C945.885 23.8457 953.218 37.6592 953.896 55.7942H916.256C915.578 45.5305 910.661 38.2379 901.505 33.9164C895.401 31.0611 887.814 29.6334 878.743 29.6334C868.655 29.6334 860.601 31.4855 854.582 35.1897C848.563 38.8939 845.554 44.0643 845.554 50.701C845.554 56.7974 848.521 61.3505 854.455 64.3601C858.27 66.3666 866.408 68.7203 878.87 71.4212L911.17 78.4823C925.327 81.5691 936.009 85.6978 943.214 90.8682C954.405 98.8939 960 110.508 960 125.711C960 141.299 953.43 154.264 940.29 164.605C927.234 174.868 908.754 180 884.847 180C860.432 180 841.23 174.945 827.242 164.836C813.254 154.65 806.261 140.682 806.261 122.932H843.646Z" fill="#FB71BC"/>
				</svg>
				
			</motion.div>
			<div className="h-[70%] w-full mt-auto md:w-[70%] md:h-full md:ml-auto relative md:pb-24 px-4 md:px-12 md:py-8 md:px-32 flex flex-col justify-center items-center gap-3 md:gap-none">
				<EventLink href="/coming-soon" label="Workshops" className="self-start my-1 md:ml-8"/>
				<EventLink href="/coming-soon" label="Proshows" className="self-end my-1 md:mt-6 md:mr-12"/>
				<EventLink href="/coming-soon" label="Talks" className="self-start my-1 ml-6"/>
				<EventLink href="/coming-soon" label="Competition" className="self-end my-1"/>
				<EventLink href="/coming-soon" label="Games" className="self-start my-1 md:ml-16 md:mt-2"/>
				{
					Array.from({length: isMobile ? 20 : 30}, () => <Glass className="inset-0 w-24 h-36 left-1/100 top-2/16" style={{left: `${Math.random()*100}%`}} speed={10*Math.random()}/>)
				}
			</div>
		</section>
	)
}